<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software de Facturación - TMV INFORMATICA</title>
    <style>
        /* Estilos Generales y Login (Se mantienen) */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f9; color: #333; margin: 0; padding: 0; }
        .container { width: 90%; max-width: 1000px; margin: 20px auto; padding: 20px; background-color: #fff; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        #login-form { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .login-box { padding: 40px; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); text-align: center; }
        .login-box input { padding: 10px; margin: 10px 0; width: 250px; border: 1px solid #ddd; border-radius: 4px; }
        .login-box button { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-top: 15px; }
        .error-message { color: red; margin-top: 15px; font-weight: bold; }

        /* Estilos de Factura */
        #facturacion-content { display: none; }
        h1 { color: #0056b3; text-align: center; font-size: 2em; margin-bottom: 30px; }
        h2 { color: #0056b3; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 20px; font-size: 1.2em; }
        .input-group { display: flex; gap: 20px; margin-bottom: 15px; }
        .input-group > div { flex: 1; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; }
        input[type="text"], input[type="date"], select, input[type="number"] { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        #cliente-cif-group { display: flex; gap: 20px; margin-bottom: 15px; }
        #cliente-cif-group > div { flex: 1; }
        .articulo-row { display: grid; grid-template-columns: 3fr 1fr 1fr 1fr 0.5fr; gap: 10px; align-items: center; margin-bottom: 8px; padding: 5px 8px; border-bottom: 1px dashed #eee; }
        .articulo-row.header { font-weight: bold; background-color: #eaf2ff; padding: 10px 8px; border-bottom: 2px solid #0056b3; }
        .articulo-row .total-linea { font-weight: bold; text-align: right; }
        .delete-btn { background-color: #dc3545; color: white; border: none; padding: 5px 8px; border-radius: 4px; cursor: pointer; }
        .totales-box { margin-top: 30px; text-align: right; border-top: 2px solid #0056b3; padding-top: 15px; }
        .totales-row { display: flex; justify-content: flex-end; font-size: 1.1em; margin-bottom: 8px; }
        .totales-row label { width: 150px; text-align: left; margin-right: 10px; }
        .totales-row span { width: 180px; text-align: right; font-weight: bold; }
        #total-final { font-size: 1.5em; color: #dc3545; font-weight: bold; }
        .action-buttons { margin-top: 30px; text-align: center; }
        .action-buttons button { padding: 10px 20px; margin: 0 10px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; }
        #print-btn { background-color: #4CAF50; color: white; }
        
        /* Contenido del membrete (OCULTO por defecto) */
        #membrete-impresion {
            display: none; 
            text-align: right; 
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 3px solid #0056b3;
            line-height: 1.4;
        }

        /* --- ESTILOS DE IMPRESIÓN --- */
        @media print {
            /* 1. Ocultar elementos de control y bienvenida */
            .action-buttons, .delete-btn, .add-articulo-form, h2:nth-of-type(3), h1, p:first-of-type { display: none; }
            .container { box-shadow: none; border: none; margin: 0; padding: 0; max-width: 100%; width: 100%; }
            body { background-color: #fff; }

            /* 2. Mostrar el membrete en lugar del H1 de bienvenida */
            #membrete-impresion {
                display: block; 
            }
            
            /* 3. Asegurar que los inputs se vean como texto plano y no como formularios */
            input, select {
                border: none !important;
                background: none !important;
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 !important;
                font-weight: normal;
            }
            .input-group > div {
                border-bottom: 1px solid #ccc;
                padding-bottom: 5px;
            }

            /* 4. Intentar eliminar los encabezados y pies del navegador */
            @page {
                size: A4;
                margin: 0.5cm; /* Margen reducido */
                /*
